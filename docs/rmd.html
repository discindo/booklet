<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Поглавје 5 Повторливи документи / извештаи со писмено програмирање (R + markdown) | Препораки за повторливо анализирање на податоци</title>
  <meta name="description" content="Прирачник за повторливо анализирање и објавување на податоци. Дискутираме теми, процедури, и алатки од R екосистемот кои олеснуваат обработка на податоци со најдобрите и најбезбедни пракси и кои овозможуваат повторување на анализите со минимален труд од страна на надворешен корисник." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Поглавје 5 Повторливи документи / извештаи со писмено програмирање (R + markdown) | Препораки за повторливо анализирање на податоци" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Прирачник за повторливо анализирање и објавување на податоци. Дискутираме теми, процедури, и алатки од R екосистемот кои олеснуваат обработка на податоци со најдобрите и најбезбедни пракси и кои овозможуваат повторување на анализите со минимален труд од страна на надворешен корисник." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Поглавје 5 Повторливи документи / извештаи со писмено програмирање (R + markdown) | Препораки за повторливо анализирање на податоци" />
  
  <meta name="twitter:description" content="Прирачник за повторливо анализирање и објавување на податоци. Дискутираме теми, процедури, и алатки од R екосистемот кои олеснуваат обработка на податоци со најдобрите и најбезбедни пракси и кои овозможуваат повторување на анализите со минимален труд од страна на надворешен корисник." />
  

<meta name="author" content="Теофил Наков, Новица Наков, Слободен софтвер Македонија" />


<meta name="date" content="2020-12-22" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="conversion.html"/>
<link rel="next" href="proekti.html"/>
<script src="libs/header-attrs-2.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VCF7E2K9C2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VCF7E2K9C2');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Повторлива анализа на податоци</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Резиме</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Вовед</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#analogy"><i class="fa fa-check"></i><b>1.1</b> Аналогија</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#audience"><i class="fa fa-check"></i><b>1.2</b> За кого е наменет овој прирачник</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#organ"><i class="fa fa-check"></i><b>1.3</b> Организација</a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#подобрувања-и-коментари"><i class="fa fa-check"></i><b>1.4</b> Подобрувања и коментари</a></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#за-овој-прирачник"><i class="fa fa-check"></i><b>1.5</b> За овој прирачник</a></li>
<li class="chapter" data-level="1.6" data-path="intro.html"><a href="intro.html#лиценца"><i class="fa fa-check"></i><b>1.6</b> Лиценца</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="tools.html"><a href="tools.html"><i class="fa fa-check"></i><b>2</b> Алатки</a>
<ul>
<li class="chapter" data-level="2.1" data-path="tools.html"><a href="tools.html#програмски-јазик-r"><i class="fa fa-check"></i><b>2.1</b> Програмски јазик: <code>R</code></a></li>
<li class="chapter" data-level="2.2" data-path="tools.html"><a href="tools.html#инсталација"><i class="fa fa-check"></i><b>2.2</b> Инсталација</a></li>
<li class="chapter" data-level="2.3" data-path="tools.html"><a href="tools.html#контрола-на-изворен-код-git"><i class="fa fa-check"></i><b>2.3</b> Контрола на изворен код: <code>git</code></a></li>
<li class="chapter" data-level="2.4" data-path="tools.html"><a href="tools.html#резиме-1"><i class="fa fa-check"></i><b>2.4</b> Резиме</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="nogood.html"><a href="nogood.html"><i class="fa fa-check"></i><b>3</b> Анализи што не може да се повторат</a>
<ul>
<li class="chapter" data-level="3.1" data-path="nogood.html"><a href="nogood.html#typical"><i class="fa fa-check"></i><b>3.1</b> Типична анализа (која никој, дури ни авторот, не може да ја повтори)</a></li>
<li class="chapter" data-level="3.2" data-path="nogood.html"><a href="nogood.html#indicators"><i class="fa fa-check"></i><b>3.2</b> Типични пракси кои доведуваат до не-повторливи анализи</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="conversion.html"><a href="conversion.html"><i class="fa fa-check"></i><b>4</b> Конверзија во повторлив код</a>
<ul>
<li class="chapter" data-level="4.1" data-path="conversion.html"><a href="conversion.html#податоци"><i class="fa fa-check"></i><b>4.1</b> Податоци</a></li>
<li class="chapter" data-level="4.2" data-path="conversion.html"><a href="conversion.html#први-чекори-кон-повторливост"><i class="fa fa-check"></i><b>4.2</b> Први чекори кон повторливост</a></li>
<li class="chapter" data-level="4.3" data-path="conversion.html"><a href="conversion.html#функција"><i class="fa fa-check"></i><b>4.3</b> Функција</a></li>
<li class="chapter" data-level="4.4" data-path="conversion.html"><a href="conversion.html#rscript-што-може-да-го-користиме-без-да-отвараме-r"><i class="fa fa-check"></i><b>4.4</b> Rscript што може да го користиме без да отвараме <code>R</code></a></li>
<li class="chapter" data-level="4.5" data-path="conversion.html"><a href="conversion.html#резиме-2"><i class="fa fa-check"></i><b>4.5</b> Резиме</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="rmd.html"><a href="rmd.html"><i class="fa fa-check"></i><b>5</b> Повторливи документи / извештаи со писмено програмирање (R + markdown)</a>
<ul>
<li class="chapter" data-level="5.1" data-path="rmd.html"><a href="rmd.html#форматирање-на-текст-со-markdown"><i class="fa fa-check"></i><b>5.1</b> Форматирање на текст со markdown</a></li>
<li class="chapter" data-level="5.2" data-path="rmd.html"><a href="rmd.html#плетење-на-текст-код-и-резултати-со-knitr"><i class="fa fa-check"></i><b>5.2</b> Плетење на текст, код, и резултати со <code>knitr</code></a></li>
<li class="chapter" data-level="5.3" data-path="rmd.html"><a href="rmd.html#извештаи-со-параметри"><i class="fa fa-check"></i><b>5.3</b> Извештаи со параметри</a></li>
<li class="chapter" data-level="5.4" data-path="rmd.html"><a href="rmd.html#следни-чекори"><i class="fa fa-check"></i><b>5.4</b> Следни чекори</a></li>
<li class="chapter" data-level="5.5" data-path="rmd.html"><a href="rmd.html#резиме-3"><i class="fa fa-check"></i><b>5.5</b> Резиме</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="proekti.html"><a href="proekti.html"><i class="fa fa-check"></i><b>6</b> Повторливи проекти</a>
<ul>
<li class="chapter" data-level="6.1" data-path="proekti.html"><a href="proekti.html#стратегија-1-направи-сам"><i class="fa fa-check"></i><b>6.1</b> Стратегија 1: Направи сам</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="proekti.html"><a href="proekti.html#структура"><i class="fa fa-check"></i><b>6.1.1</b> Структура</a></li>
<li class="chapter" data-level="6.1.2" data-path="proekti.html"><a href="proekti.html#предности"><i class="fa fa-check"></i><b>6.1.2</b> Предности</a></li>
<li class="chapter" data-level="6.1.3" data-path="proekti.html"><a href="proekti.html#недостатоци"><i class="fa fa-check"></i><b>6.1.3</b> Недостатоци</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="proekti.html"><a href="proekti.html#стратегија-2-формален-r-пакет-или-некоја-поедноставена-варијанта"><i class="fa fa-check"></i><b>6.2</b> Стратегија 2: Формален <code>R</code> пакет или некоја поедноставена варијанта</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="proekti.html"><a href="proekti.html#структура-1"><i class="fa fa-check"></i><b>6.2.1</b> Структура</a></li>
<li class="chapter" data-level="6.2.2" data-path="proekti.html"><a href="proekti.html#поставување"><i class="fa fa-check"></i><b>6.2.2</b> Поставување</a></li>
<li class="chapter" data-level="6.2.3" data-path="proekti.html"><a href="proekti.html#предности-1"><i class="fa fa-check"></i><b>6.2.3</b> Предности</a></li>
<li class="chapter" data-level="6.2.4" data-path="proekti.html"><a href="proekti.html#недостатоци-1"><i class="fa fa-check"></i><b>6.2.4</b> Недостатоци</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="proekti.html"><a href="proekti.html#резиме-4"><i class="fa fa-check"></i><b>6.3</b> Резиме</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="git.html"><a href="git.html"><i class="fa fa-check"></i><b>7</b> Контрола на изворниот код со git и GitHub</a>
<ul>
<li class="chapter" data-level="7.1" data-path="git.html"><a href="git.html#основи-на-git"><i class="fa fa-check"></i><b>7.1</b> Основи на <code>git</code></a></li>
<li class="chapter" data-level="7.2" data-path="git.html"><a href="git.html#основи-на-github-за-соработка-и-објавување"><i class="fa fa-check"></i><b>7.2</b> Основи на GitHub за соработка и објавување</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="git.html"><a href="git.html#потребен-софтвер"><i class="fa fa-check"></i><b>7.2.1</b> Потребен софтвер</a></li>
<li class="chapter" data-level="7.2.2" data-path="git.html"><a href="git.html#поставување-1"><i class="fa fa-check"></i><b>7.2.2</b> Поставување</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="git.html"><a href="git.html#резиме-5"><i class="fa fa-check"></i><b>7.3</b> Резиме</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="литература.html"><a href="литература.html"><i class="fa fa-check"></i>Литература</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Објавено со bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Препораки за повторливо анализирање на податоци</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="rmd" class="section level1" number="5">
<h1><span class="header-section-number">Поглавје 5</span> Повторливи документи / извештаи со писмено програмирање (R + markdown)</h1>
<p>Во претходното поглавје, се запознавме со некои од главните методи за обезбедување на нашиот програмски код со цел да биде фунцкионален и на нечиј друг компјутер. Разгледавме ситуација со една скрипта и една табела со резултати, но доколку се запрашаме, сигурно ќе се согласиме дека речиси никогаш не е доволно да се испрати (или објави) само една табела или пресметка. Наспроти, често потребно е да се додаде текстуално објаснување или некаков друг контекст на податоците. Исто така, во многу случаи, нашите визуелизации во форма на табели или графици, или нашите статистички резултати (t-вредности, p-вредности, равенки за регресија), треба да ги прикажеме заедно со програмскиот код кој сме го напишале за да дојдеме то тие резултати.</p>
<p>За едноставно комбинирање на код, податоци, резултати и текст во еден документ, светот на <code>R</code> се користи <a href="https://www.rdocumentation.org/packages/rmarkdown/versions/2.6"><code>rmarkdown</code></a> <span class="citation">(<a href="литература.html#ref-R-rmarkdown" role="doc-biblioref">Allaire et al. 2020</a>)</span>. <code>rmarkdown</code> овозможува комбинирање на сите елементи на едно истражување во документ погоден за понатамошно споделување. Патем, така е напишан и овој прирачник, кој исто така цели да биде повторлив.</p>
<div id="форматирање-на-текст-со-markdown" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Форматирање на текст со markdown</h2>
<p>Markdown, за разлика од <em>markup</em> програмски јазици како <code>HTML</code> или <code>LaTeX</code> има за цел да го поедностави процесот на форматирање на текст. За детална референца на филозофијата и синтаксата на <code>markdown</code>, погледнете ги официјалните вебсајти нa <a href="https://daringfireball.net/projects/markdown/syntax">оригиналната спецификација</a> или поновата <a href="https://commonmark.org/">стандардизирана спецификација</a>. Во контекст на <code>R</code> и <code>Rstudio</code> погледнете го поглавјето за <a href="https://r4ds.had.co.nz/r-markdown.html">Rmarkdown во книгата R for Data Science</a> или <a href="https://emilyriederer.netlify.app/post/rmarkdown-driven-development/">овој блогпост</a> (и линковите таму) посветен на процесот на развивање на <code>R</code> код, или развивање на една анализа низ призмата на писмено програмирање со <code>rmarkdown</code> („писмено“ го преведуваме од англиското ‘literate programming’).</p>
<p>Тука, накратко ќе ги споменеме најчестите компоненти. На пример, обичниот текст со мала декорација прикажан тука:</p>
<pre><code>Оваа _реченица_ е напишана во **markdown** но не е процесирана за да се покаже синтаксата. 
На [овој линк](https://kbroman.org/knitr_knutshell/pages/Rmarkdown.html) или 
[овој линк](https://rmarkdown.rstudio.com/authoring_quick_tour.html) можете да 
прочитате повеќе за пишување `Rmarkdown`. 

За директни калкулации во текстот, користите ja следната синтакса: `р 3.14 * 2`. 
Kаде што првиот елемент на парчето (chunk) укажува како да го процесираме кодот што следи. 
**За `R` користете `r`**. (Во ова не-процесирано парче, не користиме кирилично `р` токму со
цел на тоа да ја покажеме синтакста без да го конвертираме кодот во пресметаната вредност)

За прикажување математичка нотација, користете: $P = r^2 * \pi$</code></pre>
<p>по процесирањето ќе биде конвертиран во следниот параграф:</p>
<blockquote>
<p>Оваа <em>реченица</em> е напишана во <strong>markdown</strong> но не е процесирана за да се покаже синтаксата.
На <a href="https://kbroman.org/knitr_knutshell/pages/Rmarkdown.html">овој линк</a> или
<a href="https://rmarkdown.rstudio.com/authoring_quick_tour.html">овој линк</a> можете да
прочитате повеќе за пишување <code>Rmarkdown</code>.</p>
</blockquote>
<blockquote>
<p>За директни калкулации во текстот, користите ja следната синтакса: 6.28.
Kаде што првиот елемент на парчето (chunk) укажува како да го процесираме кодот што следи.
<strong>За <code>R</code> користете <code>r</code></strong>. (Во ова не-процесирано парче, ние користиме кирилично <code>р</code> токму со
цел на тоа да ја покажеме синтакста без да го конвертираме кодот во пресметаната вредност.)</p>
</blockquote>
<blockquote>
<p>За прикажување математичка нотација, користете: <span class="math inline">\(P = r^2 * \pi\)</span></p>
</blockquote>
<p>Забележуваме дека е навистина еднотавно да се куца обичен текст кој во <code>HTML</code>, <code>PDF</code>, или <code>MS Word</code> документ ќе биде прикажан како задебелен, курзив, со линкови, итн.</p>
</div>
<div id="плетење-на-текст-код-и-резултати-со-knitr" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Плетење на текст, код, и резултати со <code>knitr</code></h2>
<p>Досега видовме како можеме лесно да маркираме обичен текст кој ќе биде процесиран во убаво форматиран документ. Она што ни недостасува е комбинирање (плетење) на ваквиот текстот со програмски код и резултатите од тој код. <code>rmarkdown</code> го прави овој чекор супер едноставен. Се што е неопходно е да додадеме парче код кое почнува со нотацијата <code>```{r}</code> и завршува со нотацијата <code>```</code>. Тогаш <code>R</code> и пакетот <a href="https://www.rdocumentation.org/packages/knitr/versions/1.30"><code>knitr</code></a> <span class="citation">(<a href="литература.html#ref-knitr1" role="doc-biblioref">Xie 2014</a>, <a href="литература.html#ref-knitr2" role="doc-biblioref">2015</a>, <a href="литература.html#ref-knitr3" role="doc-biblioref">2020c</a>)</span> ќе се обидат да го интерпретираат и извршат сиот текст во ова парче како <code>R</code> код или коментари што почнуваат со <code>#</code>. Доколку извршувањето на тој код резултира со табела или график, <code>knitr</code> ќе го прикаже тој елемент веднаш под извршениот код.</p>
<p>Ова е далеку полесно со пример:</p>
<div class="figure">
<img src="www/rmd.png" alt="" />
<p class="caption">Пример за еден едноставен Rmd документ што прикажува текст, код, и резултати</p>
</div>
<p>Откако ќе го сплетеме овој документ, добиваме:</p>
<div class="figure">
<img src="www/rmd-rendered.png" alt="" />
<p class="caption">HTML документ креиран со плетењето на горниот Rmd код</p>
</div>
<p>Ова навистина само ја допира површината на тоа што е можно да се направи со алатките како <code>rmarkdown</code> и <code>knitr</code>. Имајќи во предвид дека крајните документи се <code>HTML</code>, <code>LaTex</code>, или <code>MS Word</code>, голем дел од богатсвото на можности на овие далеку поопширни <code>markup</code> системи ќе ви бидат достапни кога пишувате анализи во <code>rmarkdown</code>. Така да, ако сакате да вклучите лого од вашата организација, посебен фонт, специјално форматирње на маргини, пагинација, итн, сето тоа ќе можете тоа да го направите со стандардни методи достапни во <code>HTML</code> или <code>LaTeX</code>.</p>
</div>
<div id="извештаи-со-параметри" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Извештаи со параметри</h2>
<p>Она што за нас е посебно корисно и интересно, е користењето на оваа платформа за писмено програмирање за пишување на <a href="https://rmarkdown.rstudio.com/developer_parameterized_reports.html%23parameter_types%2F">параметризирани извештаи</a>. Што значи ова? Па доколку имате некоj стандарден сет на анализи кои треба да ги повторите за сите градови во Македонија, можете да го извршите вашиот <code>Rmd</code> извештај со параметар за тоа кој град треба да биде обработен. Во самиот изворен код на извештајот, дефинирате <a href="https://yaml.org/spec/1.2/spec.html"><code>yaml</code></a> преамбула налик на следната:</p>
<pre><code>---
title: Мој Извештај
output: html_document
params:
  grad: Tetovo
---</code></pre>
<p>Ова креира листа на параметри со името <code>params</code> која е достапна во <code>R</code> средината за време на извршувањето на документот, чијшто елементи може да ги употребите на следниот начин:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="rmd.html#cb22-1" aria-hidden="true" tabindex="-1"></a>params<span class="sc">$</span>grad</span></code></pre></div>
<p>Доколку имаме некоја функција во нашиот извештај која се извршува пред правење на некој график за одреден град:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="rmd.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb23-2"><a href="rmd.html#cb23-2" aria-hidden="true" tabindex="-1"></a>filtriraj_gradovi <span class="ot">&lt;-</span> <span class="cf">function</span>(podatoci, potreben_grad) {</span>
<span id="cb23-3"><a href="rmd.html#cb23-3" aria-hidden="true" tabindex="-1"></a>  podatoci <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(grad <span class="sc">==</span> potreben_grad)</span>
<span id="cb23-4"><a href="rmd.html#cb23-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Тогаш можете параметарот даден во преамбулата да го искористите при повикувањето на фунцкијата, и сите натамошни резултати ќе бидат посветени на градот што сме го пратиле како параметар:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="rmd.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># претходен код и текст</span></span>
<span id="cb24-2"><a href="rmd.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">filtriraj_gradovi</span>(<span class="at">podatoci =</span> moi_podatoci, <span class="at">potreben_grad =</span> params<span class="sc">$</span>grad)</span>
<span id="cb24-3"><a href="rmd.html#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co"># натамошен код и текст</span></span></code></pre></div>
<p>За да ги направиме сите извештаи побрзо, во можеме да го повикуваме извршувањето во <code>R</code> конзола:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="rmd.html#cb25-1" aria-hidden="true" tabindex="-1"></a>rmarkdown<span class="sc">::</span><span class="fu">render</span>(<span class="at">input =</span> <span class="st">&quot;mojizvestaj.Rmd&quot;</span>, <span class="at">params =</span> <span class="fu">list</span>(<span class="st">&quot;Tetovo&quot;</span>))</span></code></pre></div>
<p>Оттука, можеме дури и да напишеме <code>for</code> циклус со кој што ќе ги процесираме сите градови наеднаш и ќе генерираме посебен <code>HTML</code>, <code>PDF</code> или <code>MS Word</code> документ се секој град:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="rmd.html#cb26-1" aria-hidden="true" tabindex="-1"></a>gradovi <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Tetovo&quot;</span>, <span class="st">&quot;Gostivar&quot;</span>, <span class="st">&quot;Debar&quot;</span>, <span class="st">&quot;Berovo&quot;</span>, <span class="st">&quot;Dojran&quot;</span>) <span class="co"># ...</span></span>
<span id="cb26-2"><a href="rmd.html#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> ( i <span class="cf">in</span> gradovi) {</span>
<span id="cb26-3"><a href="rmd.html#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;Подготвувам извештај за: &quot;</span>, i)</span>
<span id="cb26-4"><a href="rmd.html#cb26-4" aria-hidden="true" tabindex="-1"></a>  rmarkdown<span class="sc">::</span><span class="fu">render</span>(<span class="at">input =</span> <span class="st">&quot;pateka/do/mojizvestaj.Rmd&quot;</span>, <span class="at">params =</span> <span class="fu">list</span>(i))</span>
<span id="cb26-5"><a href="rmd.html#cb26-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Како оваа стратегија ја подобрува повторливоста на нашите анализи? Доколку немаме извештаи со параметри можеме да замислиме две стратегии. Првата, имаме еден главен <code>izvestaj.Rmd</code> којшто никогаш не го менуваме и правиме копии за секој град, така што набрзо нашата работна средина станува невозможна за менаџирање на долг рок:</p>
<pre><code>izvestaj.Rmd
tetovo-izvestaj.Rmd
debar-izvestaj.Rmd
skopje-izvestaj.Rmd
skopje-izvestaj-juni.Rmd
skopje-izvestaj-juni-specijalen-so-logo.Rmd
kichevo-izvestaj-avgust-2019.Rmd
kicevo-izvestaj-avgust.Rmd</code></pre>
<p>Втората, имаме еден <code>izvestaj.Rmd</code> којшто го менуваме директно и секогаш мора да го отвориме, промениме, и извршиме рачно. Така да кога ќе стигнат новите податоци следниот месец имаме 2-3 часа работа да го промениме градот во функцијата горе триесетина пати.</p>
<p>Дури и да го имате потребното време за вакви активности, очигледно е дека со овие опции е далеку полесно да направите грешка отколку со извештајот со параметри, којшто го пишувате еднаш и можете да го користите секогаш кога ќе ви треба без да го менувате изворниот код. Доколку треба да се измени или подобри извештајот, тоа се прави со промена на само еден документ, не треба да се сетите дека <code>kopje-izvestaj-juni-specijalen-so-logo.Rmd</code> треба да се промени засебно бидејќи има нешто специфично.</p>
</div>
<div id="следни-чекори" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> Следни чекори</h2>
<p>Околината на <code>rmarkdown</code> и <code>knitr</code> е особено богата со алатки за посебни намени што навистина можат да придонесат кон поголема транспарентност и повторливост на вашите анализи и генерално кон поголема продуктивност во вашата работа. Подолу наведуваме само неколку од овие алатки:</p>
<ul>
<li>креирање презентации (на пример: <a href="https://rmarkdown.rstudio.com/lesson-11.html">тука</a> или <a href="https://bookdown.org/yihui/rmarkdown/xaringan.html">тука</a>)</li>
<li>креирање <a href="https://rmarkdown.rstudio.com/lesson-14.html"><em>интерактивни</em> <code>Rmd</code></a> документи што користат <a href="https://shiny.rstudio.com/"><code>Shiny</code></a> <span class="citation">(<a href="литература.html#ref-R-shiny" role="doc-biblioref">Chang et al. 2020</a>)</span> во позадина</li>
<li>креирање стилизирани HTML документи со <a href="https://prettydoc.statr.me/"><code>prettydoc</code></a></li>
<li>креирање на книги со <a href="https://bookdown.org/"><code>bookdown</code></a> (како овој текст)</li>
<li>креирање на едноставни <a href="https://rmarkdown.rstudio.com/lesson-13.html"><code>rmarkdown</code> вебсајти</a> со <code>rmarkdown::render_site</code></li>
<li>креирање на дашбоарди со <a href="https://rmarkdown.rstudio.com/lesson-12.html"><code>flexdashboard</code></a></li>
</ul>
</div>
<div id="резиме-3" class="section level2" number="5.5">
<h2><span class="header-section-number">5.5</span> Резиме</h2>
<p>Технички гледано, користењето на писмено програмирање, дали со <code>rmarkdown</code> + <code>knitr</code> или <a href="https://www.rdocumentation.org/packages/utils/versions/3.6.2/topics/Sweave"><code>Sweave</code></a> во <code>R</code> или <a href="https://jupyter.org/"><code>Jypiter</code></a> тетратки во <code>Python</code> (или некој од другите подджани јазици), додава зависности на нашиот код, и со самото тоа, до некоја мера оди наспроти идејата за правење што помалку претпоставки за контекстот во кој нашиот код ќе биде користен. Но од друга страна, придобивките од комбинирањето на текст, код, и резултати во истиот документ кој лесно може да биде објавен како веб страница веројатно се доволно големи да додавањето на овие зависности во вашиот повторлив проект е оправдано. Без разлика дали пишувате домашна задача или дисертација, можноста да направите корекции во кодот или текстот и да го извршите вашиот <code>Rmd</code> со една команда е секако далеку по-повторливо отколку да копирате бројки помеѓу два или повеќе различни програми пазејќи да замените на сите неопходни места.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="conversion.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="proekti.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["booklet.pdf", "booklet.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
